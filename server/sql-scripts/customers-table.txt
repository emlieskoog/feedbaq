DROP TABLE customers;

CREATE TABLE customers (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100),
    created_at TIMESTAMP DEFAULT current_timestamp,
    updated_at TIMESTAMP DEFAULT current_timestamp
);

CREATE FUNCTION update_timestamp()
RETURNS TRIGGER AS '
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END' LANGUAGE 'plpgsql';

CREATE TRIGGER update_trigger
BEFORE UPDATE ON customers
FOR EACH ROW
EXECUTE PROCEDURE update_timestamp();

INSERT INTO customers (name) VALUES ('Coca-Cola');
INSERT INTO customers (name) VALUES ('SEB');
INSERT INTO customers (name) VALUES ('Scania');
INSERT INTO customers (name) VALUES ('Handelsbanken');
INSERT INTO customers (name) VALUES ('Nocco');
INSERT INTO customers (name) VALUES ('Ica');

SELECT * FROM customers;
