DROP TABLE users;

CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    email VARCHAR(100),
    password VARCHAR(100),
    role VARCHAR(25),
    created_at TIMESTAMP DEFAULT current_timestamp,
    updated_at TIMESTAMP DEFAULT current_timestamp
);

CREATE FUNCTION update_timestamp()
RETURNS TRIGGER AS '
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END' LANGUAGE 'plpgsql';

CREATE TRIGGER update_trigger
BEFORE UPDATE ON users
FOR EACH ROW
EXECUTE PROCEDURE update_timestamp();

INSERT INTO users (email, password, role) VALUES ('lucas.hultqvist@hiq.se', 'hej123', 'CONSULTANT');
INSERT INTO users (email, password, role) VALUES ('wilma.axelsson@hiq.se', 'hej123', 'CONSULTANT');
INSERT INTO users (email, password, role) VALUES ('agnes.davidsdottir@hiq.se', 'hej123', 'CONSULTANT');
INSERT INTO users (email, password, role) VALUES ('emelie.skoog@hiq.se', 'hej123', 'CONSULTANT');
INSERT INTO users (email, password, role) VALUES ('sebastian.frennesson@hiq.se', 'hej123', 'SALES');
INSERT INTO users (email, password, role) VALUES ('anna.sevon@hiq.se', 'hej123', 'MANAGER');
INSERT INTO users (email, password, role) VALUES ('matthias.bauhofer@hiq.se', 'hej123', 'MANAGER');

SELECT * FROM users;
