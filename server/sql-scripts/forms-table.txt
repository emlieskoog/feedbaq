DROP TABLE forms;

CREATE TABLE forms (
    id SERIAL PRIMARY KEY,
    consultant_id INTEGER,
    consultant_name VARCHAR(70),
    customer VARCHAR(50),
    sales_id INTEGER,
    manager_id INTEGER,
    date DATE,
    created_at TIMESTAMP DEFAULT current_timestamp,
    updated_at TIMESTAMP DEFAULT current_timestamp
);

CREATE FUNCTION update_timestamp()
RETURNS TRIGGER AS '
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END' LANGUAGE 'plpgsql';

CREATE TRIGGER update_trigger
BEFORE UPDATE ON forms
FOR EACH ROW
EXECUTE PROCEDURE update_timestamp();

INSERT INTO forms (consultant_name, consultant_id, customer, sales_id, manager_id, date) VALUES ('Agnes', 1, 'Ica', 5, 6, '2023-08-13');
INSERT INTO forms (consultant_name, consultant_id, customer, sales_id, manager_id, date) VALUES ('Lucas', 3, 'Nocco', 7, 5, '2023-08-23');
INSERT INTO forms (consultant_name, consultant_id, customer, sales_id, manager_id, date) VALUES ('Wilma', 2, 'Levis', 1, 3, '2023-09-03');
INSERT INTO forms (consultant_name, consultant_id, customer, sales_id, manager_id, date) VALUES ('Emelie', 4, 'Dell', 4, 5, '2023-09-13');
INSERT INTO forms (consultant_name, consultant_id, customer, sales_id, manager_id, date) VALUES ('Agnes', 1, 'IKEA', 5, 1, '2023-09-20');
INSERT INTO forms (consultant_name, consultant_id, customer, sales_id, manager_id, date) VALUES ('Wilma', 2, 'Coop', 1, 5, '2023-09-24');
INSERT INTO forms (consultant_name, consultant_id, customer, sales_id, manager_id, date) VALUES ('Emelie', 4, 'Hemk√∂p', 4, 5, '2023-09-22');

SELECT * FROM forms;